<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jumpy Jump</title>
    <style>
        body { background-color: black; margin: 0; overflow: hidden; font-family: 'Arial Black', sans-serif; touch-action: manipulation; }
        .game-bar { display: flex; justify-content: space-between; align-items: center; background-color: black; padding: 10px 20px; border-bottom: 3px solid blue; position: fixed; top: 0; width: 100%; box-sizing: border-box; z-index: 1000; }
        .stats { color: white; display: flex; gap: 15px; font-size: 13px; }
        .stat-item { display: flex; flex-direction: column; align-items: center; }
        .label { font-size: 10px; color: #aaa; text-transform: uppercase; }
        .floor { position: absolute; bottom: 150px; width: 100%; height: 5px; background-color: white; z-index: 5; }
        #character { width: 60px; height: 60px; background-color: red; position: absolute; bottom: 150px; left: 50px; z-index: 100; }
        #enemy { width: 60px; height: 60px; background-color: blue; position: absolute; bottom: 150px; left: 3000px; z-index: 90; }
        .screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; background: rgba(0,0,0,0.95); z-index: 2000; text-align: center; }
        .big-blue-title { color: blue; font-size: 50px; margin-bottom: 20px; }
        .main-btn { padding: 20px 40px; font-size: 22px; background: blue; color: white; border: 2px solid white; border-radius: 15px; cursor: pointer; font-weight: bold; }
        .mini-btn { padding: 8px 12px; font-size: 11px; color: white; border: 1px solid white; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .instruction { color: white; margin-top: 20px; font-size: 16px; opacity: 0.8; font-family: Arial, sans-serif; }
    </style>
</head>
<body>

    <div class="game-bar">
        <div style="color: blue; font-weight: bold;">JUMPY JUMP</div>
        <div class="stats">
            <div class="stat-item"><span class="label">Punkte</span><span id="score-display">0</span></div>
            <div class="stat-item"><span class="label">Rekord</span><span id="highscore-display">üèÜ0</span></div>
            <div class="stat-item"><span class="label">Level</span><span id="lvl-display">1</span></div>
        </div>
        <div style="display: flex; gap: 5px;">
            <button class="mini-btn" style="background: blue;" onclick="event.stopPropagation(); startGame()">START</button>
            <button class="mini-btn" style="background: blue;" onclick="event.stopPropagation(); stopGame()">STOP</button>
            <button class="mini-btn" style="background: blue;" onclick="event.stopPropagation(); resetEnemyOnly()">RESET</button>
        </div>
    </div>

    <div id="start-screen" class="screen">
        <div class="big-blue-title">JUMPY JUMP</div>
        <button class="main-btn" onclick="event.stopPropagation(); startGame()">START</button>
        <div class="instruction">
            Dr√ºcke die <b>Leertaste</b> oder <b>tippe das Display</b> zum Springen!
        </div>
    </div>

    <div id="game-over-screen" class="screen" style="display: none;">
        <div style="color: white; font-size: 60px; font-weight: bold; margin-bottom: 20px;">GAME OVER!</div>
        <div id="final-score" style="color: white; font-size: 24px; margin-bottom: 30px;">0</div>
        <button class="main-btn" onclick="event.stopPropagation(); restartQuick()">NOCHMAL</button>
    </div>

    <div class="floor"></div>
    <div id="character"></div>
    <div id="enemy"></div>

    <script>
        const char = document.getElementById('character'), ene = document.getElementById('enemy');
        const scoreDisp = document.getElementById('score-display'), highDisp = document.getElementById('highscore-display');
        const lvlDisp = document.getElementById('lvl-display'), startScr = document.getElementById('start-screen'), goScr = document.getElementById('game-over-screen');
        const finalScoreDisp = document.getElementById('final-score');

        let score = 0, level = 1, speed = 8, running = false, enemyPos = 3000;
        let charY = 150, jumpVel = 0, grav = 0.8, jumping = false, animId;
        
        let highscore = localStorage.getItem('jumpyHighscore') || 0;
        highDisp.innerText = "üèÜ" + highscore;

        function startGame() {
            if (running) return;
            startScr.style.display = 'none';
            goScr.style.display = 'none';
            enemyPos = window.innerWidth;
            running = true;
            gameLoop();
        }

        function stopGame() {
            running = false;
            cancelAnimationFrame(animId);
        }

        function resetEnemyOnly() {
            stopGame();
            goScr.style.display = 'none';
            startScr.style.display = 'flex';
            score = 0; level = 1; speed = 8;
            enemyPos = 3000; 
            ene.style.left = enemyPos + "px";
            scoreDisp.innerText = "0";
            lvlDisp.innerText = "1";
        }

        function restartQuick() {
            resetEnemyOnly();
            startScr.style.display = 'none';
            startGame();
        }

        function jump() {
            if (!running || jumping) return;
            jumping = true;
            jumpVel = 18; 
        }

        // Steuerung f√ºr PC & Mobile kombiniert
        window.addEventListener('keydown', (e) => { if (e.code === 'Space') jump(); });
        
        // Touchstart f√ºr Handys (schneller als mousedown)
        document.body.addEventListener('touchstart', (e) => { 
            if (e.target.tagName !== 'BUTTON') {
                e.preventDefault(); // Verhindert Zoom/Scroll beim Spielen
                jump(); 
            }
        }, {passive: false});

        // Mouse f√ºr PC-Klicks
        document.body.addEventListener('mousedown', (e) => { 
            if (e.target.tagName !== 'BUTTON') jump(); 
        });

        function gameLoop() {
            if (!running) return;

            if (jumping) {
                charY += jumpVel;
                jumpVel -= grav;
                if (charY <= 150) { charY = 150; jumping = false; jumpVel = 0; }
            }
            char.style.bottom = charY + "px";

            enemyPos -= speed;
            if (enemyPos < -100) {
                enemyPos = window.innerWidth;
                score++;
                if (score % 5 === 0) { level++; speed += 1.5; }
                scoreDisp.innerText = score;
                lvlDisp.innerText = level;
            }
            ene.style.left = enemyPos + "px";

            let c = char.getBoundingClientRect();
            let e = ene.getBoundingClientRect();
            
            if (enemyPos < 500 && c.right - 25 > e.left + 25 && c.left + 25 < e.right - 25 && charY < 205) {
                gameOver();
            } else {
                animId = requestAnimationFrame(gameLoop);
            }
        }

        function gameOver() {
            running = false;
            cancelAnimationFrame(animId);
            finalScoreDisp.innerText = "Punkte: " + score;
            if (score > highscore) {
                highscore = score;
                localStorage.setItem('jumpyHighscore', highscore);
                highDisp.innerText = "üèÜ" + highscore;
            }
            goScr.style.display = 'flex';
        }
    </script>
</body>
</html>
